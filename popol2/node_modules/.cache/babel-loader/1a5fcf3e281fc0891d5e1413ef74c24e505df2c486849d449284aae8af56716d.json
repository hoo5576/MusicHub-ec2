{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import*as React from'react';import Avatar from'@mui/material/Avatar';import Button from'@mui/material/Button';import CssBaseline from'@mui/material/CssBaseline';import TextField from'@mui/material/TextField';import FormControlLabel from'@mui/material/FormControlLabel';import Checkbox from'@mui/material/Checkbox';import Link from'@mui/material/Link';import Paper from'@mui/material/Paper';import Box from'@mui/material/Box';import Grid from'@mui/material/Grid';import LockOutlinedIcon from'@mui/icons-material/LockOutlined';import Typography from'@mui/material/Typography';import{createTheme,ThemeProvider}from'@mui/material/styles';import Scroll from'./Scroll';import axios from'axios';import'../scss/Login.scss';import{useNavigate}from\"react-router-dom\";import{setCookie}from'../cookie';import{API_URL}from'../config/contansts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Copyright(props){return/*#__PURE__*/_jsxs(Typography,_objectSpread(_objectSpread({variant:\"body2\",color:\"text.secondary\",align:\"center\"},props),{},{children:['Copyright © ',/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"https://mui.com/\",children:\"Your Website\"}),' ',new Date().getFullYear(),'.']}));}// 기본 테마 생성\nvar defaultTheme=createTheme();// 로그인 페이지 컴포넌트\nexport default function SignInSide(){var navigate=useNavigate();// 로그인 폼 제출 핸들러\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var data,id,pwd;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();data=new FormData(event.currentTarget);id=data.get('email');pwd=data.get('password');console.log({email:data.get('email'),password:data.get('password')});// 서버로 로그인 요청을 보내어 처리\n_context.next=7;return axios.post(\"\".concat(API_URL,\"/api/login\"),{id:id,pwd:pwd}).then(function(res){if(res.status===200){// 로그인 성공 시 서버에서 받은 토큰을 쿠키에 저장\nvar accessToken=res.data.accessToken;var time=3600;//1시간\nvar expiration=new Date(Date.now()+time*1000);// console.log(\"expiration\",expiration);\nsetCookie('accessToken',accessToken,{expires:expiration// httpOnly: true,\n});}console.log(\"로그인 성공 res: \",res);// 로그인 성공 시 음악 목록 페이지로 이동\nnavigate('/login-main/musics');}).catch(function(error){console.error(\"로그인 실패: \",error);// 로그인 실패 시 경고 메시지 출력\nalert(\"아이디나 비밀번호가 틀렸습니다.\");});case 7:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(ThemeProvider,{theme:defaultTheme,children:/*#__PURE__*/_jsxs(Grid,{container:true,component:\"main\",sx:{height:'100vh'},children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Grid,{item:true,xs:false,sm:4,md:7}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:8,md:5,component:Paper,elevation:6,square:true,children:[/*#__PURE__*/_jsxs(Box,{sx:{my:6,mx:4,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'secondary.main'},children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD14C\\uC2A4\\uD2B8 ID: 123\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD14C\\uC2A4\\uD2B8 PWD: 123\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:handleSubmit,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",autoFocus:true}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{value:\"remember\",color:\"primary\"}),label:\"Remember me\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Link,{href:\"/join\",variant:\"body2\",children:\"회원 아니세요? 회원가입\"})})}),/*#__PURE__*/_jsx(Copyright,{sx:{mt:5}})]})]}),/*#__PURE__*/_jsx(Scroll,{})]})]})});}","map":{"version":3,"names":["React","Avatar","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Link","Paper","Box","Grid","LockOutlinedIcon","Typography","createTheme","ThemeProvider","Scroll","axios","useNavigate","setCookie","API_URL","jsx","_jsx","jsxs","_jsxs","Copyright","props","_objectSpread","variant","color","align","children","href","Date","getFullYear","defaultTheme","SignInSide","navigate","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","data","id","pwd","wrap","_callee$","_context","prev","next","preventDefault","FormData","currentTarget","get","console","log","email","password","post","concat","then","res","status","accessToken","time","expiration","now","expires","catch","error","alert","stop","_x","apply","arguments","theme","container","component","sx","height","item","xs","sm","md","elevation","square","my","mx","display","flexDirection","alignItems","m","bgcolor","noValidate","onSubmit","mt","margin","required","fullWidth","label","name","autoComplete","autoFocus","type","control","value","mb"],"sources":["C:/Users/user/Desktop/MusicHub-ec2/popol2/src/routes/Login.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Link from '@mui/material/Link';\r\nimport Paper from '@mui/material/Paper';\r\nimport Box from '@mui/material/Box';\r\nimport Grid from '@mui/material/Grid';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport Scroll from './Scroll';\r\nimport axios from 'axios';\r\nimport '../scss/Login.scss';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { setCookie } from '../cookie';\r\nimport { API_URL } from '../config/contansts'\r\n\r\nfunction Copyright(props: any) {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://mui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\n// 기본 테마 생성\r\nconst defaultTheme = createTheme();\r\n\r\n// 로그인 페이지 컴포넌트\r\nexport default function SignInSide() {\r\n  const navigate = useNavigate();\r\n  \r\n// 로그인 폼 제출 핸들러\r\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const data = new FormData(event.currentTarget);\r\n    const id = data.get('email');\r\n    const pwd = data.get('password');\r\n    console.log({\r\n      email: data.get('email'),\r\n      password: data.get('password'),\r\n    });\r\n    // 서버로 로그인 요청을 보내어 처리\r\n    await axios.post(`${API_URL}/api/login`,{id,pwd})\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tif (res.status === 200) {\r\n          // 로그인 성공 시 서버에서 받은 토큰을 쿠키에 저장\r\n\t\t\t\t\tconst accessToken = res.data.accessToken;\r\n          const time = 3600; //1시간\r\n          const expiration = new Date(Date.now() + time * 1000);\r\n          // console.log(\"expiration\",expiration);\r\n\t\t\t\t\tsetCookie('accessToken',accessToken,{\r\n\t\t\t\t\t\texpires: expiration,\r\n                        // httpOnly: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"로그인 성공 res: \",res);\r\n        // 로그인 성공 시 음악 목록 페이지로 이동\r\n\t\t\t\tnavigate('/login-main/musics');\r\n\t\t\t})\r\n\t\t\t.catch((error)=>{\r\n\t\t\t\tconsole.error(\"로그인 실패: \",error);\r\n        // 로그인 실패 시 경고 메시지 출력\r\n        alert(\"아이디나 비밀번호가 틀렸습니다.\");\r\n\t\t\t})\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider theme={defaultTheme}>\r\n      <Grid container component=\"main\" sx={{ height: '100vh' }}>\r\n        <CssBaseline />\r\n        <Grid\r\n          item\r\n          xs={false}\r\n          sm={4}\r\n          md={7}\r\n        />\r\n        <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\r\n          <Box\r\n            sx={{\r\n              my: 6,\r\n              mx: 4,\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              로그인\r\n            </Typography>\r\n            <p>테스트 ID: 123</p>\r\n            <p>테스트 PWD: 123</p>\r\n            <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 1 }}>\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                autoFocus\r\n              />\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n              />\r\n              <FormControlLabel\r\n                control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n                label=\"Remember me\"\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                sx={{ mt: 3, mb: 2 }}\r\n              >\r\n                로그인\r\n              </Button>\r\n              <Grid container>\r\n                {/* <Grid item xs>\r\n                  <Link href=\"#\" variant=\"body2\">\r\n                    비밀번호 잊었어요?\r\n                  </Link>\r\n                </Grid> */}\r\n                <Grid item>\r\n                  <Link href=\"/join\" variant=\"body2\">\r\n                    {\"회원 아니세요? 회원가입\"}\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n              <Copyright sx={{ mt: 5 }} />\r\n            </Box>\r\n          </Box>\r\n          <Scroll />\r\n        </Grid>\r\n      </Grid>\r\n    </ThemeProvider>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}