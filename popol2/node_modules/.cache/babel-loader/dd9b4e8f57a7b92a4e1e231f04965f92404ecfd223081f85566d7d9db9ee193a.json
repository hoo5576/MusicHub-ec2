{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useLocation}from'react-router-dom';import{Typography,Button}from'@mui/material';// Material-UI 컴포넌트 가져오기\nimport'../scss/Musicdetail.scss';import{API_URL}from'../config/contansts';import axios from'axios';import{getCookie,removeCookie}from'../cookie';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MusicDetails=function MusicDetails(props){var location=useLocation();var state=location.state;console.log('state: ',state);var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLyrics=_useState2[0],setShowLyrics=_useState2[1];var handleToggleLyrics=function handleToggleLyrics(){setShowLyrics(!showLyrics);};var addPlayList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var login;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:login=getCookie('accessToken');if(!(getCookie('accessToken')!=null)){_context.next=6;break;}_context.next=4;return axios({url:\"\".concat(API_URL,\"/api/playlist\"),method:'POST',headers:{Authorization:'Bearer '+login},data:{playList:state.music}}).then(function(){alert('추가되었습니다!');}).catch(function(err){console.error(err);});case 4:_context.next=9;break;case 6:alert('다시 로그인해주세요');removeCookie('accessToken');navigate('/');case 9:case\"end\":return _context.stop();}},_callee);}));return function addPlayList(){return _ref.apply(this,arguments);};}();var handleDownload=function handleDownload(music){axios({url:\"\".concat(API_URL,\"/api/mp3\"),method:'GET',responseType:'blob',params:{url:music.musicUrl}}).then(function(response){console.log(response);var blob=new Blob([response.data],{type:'audio/mpeg'});var url=window.URL.createObjectURL(blob);var link=document.createElement('a');link.setAttribute('href',url);link.setAttribute('download',\"\".concat(music.name,\".mp3\"));document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}).catch(function(error){console.error('Error during file download:',error);});};return/*#__PURE__*/_jsx(\"div\",{className:\"song-main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"song-details\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"detail-out\",children:[/*#__PURE__*/_jsx(\"img\",{src:API_URL+'/api'+state.music.imageUrl,alt:\"\\uB178\\uB798 \\uC774\\uBBF8\\uC9C0\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"details-in\",children:[/*#__PURE__*/_jsx(\"h2\",{children:state.music.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"\\uAC00\\uC218: \",state.music.singer]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"\\uC791\\uACE1\\uAC00: \",state.music.composer]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"\\uC7A5\\uB974: \",state.music.kind]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Buttons\",children:[/*#__PURE__*/_jsx(\"img\",{src:API_URL+'/images/icons/play.png',alt:\"\",onClick:function onClick(){props.onMusic(state.music);},id:\"pbtn\"}),/*#__PURE__*/_jsx(\"img\",{src:API_URL+'/images/icons/playlist.png',alt:\"\",onClick:addPlayList,id:\"plbtn\"}),/*#__PURE__*/_jsx(\"img\",{src:API_URL+'/images/icons/download.png',alt:\"\",onClick:function onClick(){return handleDownload(state.music);},id:\"dbtn\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"lyrics\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:'50px',borderTop:\"solid 1px gray\",paddingTop:'30px'},children:\"\\uAC00\\uC0AC\"}),showLyrics&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",style:{whiteSpace:'pre-line'},children:state.music.lyrics}),/*#__PURE__*/_jsx(Button,{onClick:handleToggleLyrics,style:{color:\"#fff\"},children:showLyrics?'가사 숨기기':'가사 보기'})]})]})});};export default MusicDetails;","map":{"version":3,"names":["React","useState","useLocation","Typography","Button","API_URL","axios","getCookie","removeCookie","useNavigate","jsx","_jsx","jsxs","_jsxs","MusicDetails","props","location","state","console","log","navigate","_useState","_useState2","_slicedToArray","showLyrics","setShowLyrics","handleToggleLyrics","addPlayList","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","login","wrap","_callee$","_context","prev","next","url","concat","method","headers","Authorization","data","playList","music","then","alert","catch","err","error","stop","apply","arguments","handleDownload","responseType","params","musicUrl","response","blob","Blob","type","window","URL","createObjectURL","link","document","createElement","setAttribute","name","body","appendChild","click","removeChild","revokeObjectURL","className","children","id","src","imageUrl","alt","variant","singer","composer","kind","onClick","onMusic","style","marginTop","borderTop","paddingTop","whiteSpace","lyrics","color"],"sources":["C:/Users/user/Desktop/MusicHub-ec2/popol2/src/routes/MusicDetail.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { Typography, Button } from '@mui/material'; // Material-UI 컴포넌트 가져오기\r\nimport '../scss/Musicdetail.scss';\r\nimport { API_URL } from '../config/contansts';\r\nimport axios from 'axios';\r\nimport { getCookie, removeCookie } from '../cookie';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst MusicDetails = (props) => {\r\n  const location = useLocation();\r\n  const { state } = location;\r\n  console.log('state: ', state);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [showLyrics, setShowLyrics] = useState(false);\r\n\r\n  const handleToggleLyrics = () => {\r\n    setShowLyrics(!showLyrics);\r\n  };\r\n\r\n  const addPlayList = async () => {\r\n    const login = getCookie('accessToken');\r\n    if (getCookie('accessToken') != null) {\r\n      await axios({\r\n        url: `${API_URL}/api/playlist`,\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: 'Bearer ' + login,\r\n        },\r\n        data: {\r\n          playList: state.music,\r\n        },\r\n      })\r\n        .then(() => {\r\n          alert('추가되었습니다!');\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n        });\r\n    } else {\r\n      alert('다시 로그인해주세요');\r\n      removeCookie('accessToken');\r\n      navigate('/');\r\n    }\r\n  };\r\n\r\n  const handleDownload = (music) => {\r\n    axios({\r\n      url: `${API_URL}/api/mp3`,\r\n      method: 'GET',\r\n      responseType: 'blob',\r\n      params: { url: music.musicUrl },\r\n    })\r\n      .then((response) => {\r\n        console.log(response);\r\n        const blob = new Blob([response.data], { type: 'audio/mpeg' });\r\n        const url = window.URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', `${music.name}.mp3`);\r\n\r\n        document.body.appendChild(link);\r\n\r\n        link.click();\r\n\r\n        document.body.removeChild(link);\r\n        window.URL.revokeObjectURL(url);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error during file download:', error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"song-main\">\r\n      <div className=\"song-details\">\r\n        <div id=\"detail-out\">\r\n          <img src={API_URL + '/api' + state.music.imageUrl} alt=\"노래 이미지\" />\r\n          <div id=\"details-in\">\r\n            <h2>{state.music.name}</h2>\r\n            <Typography variant=\"body1\">가수: {state.music.singer}</Typography>\r\n            <Typography variant=\"body1\">작곡가: {state.music.composer}</Typography>\r\n            <Typography variant=\"body1\">장르: {state.music.kind}</Typography>\r\n            {/* <Button onClick={() => props.onMusic(state.music)}>재생 아이콘</Button>\r\n            <Button onClick={addPlayList}>플리 아이콘</Button>\r\n            <Button onClick={() => handleDownload(state.music)}>다운로드 아이콘</Button> */}\r\n          </div>\r\n        </div>\r\n        <div className=\"Buttons\">\r\n          <img src={ API_URL + '/images/icons/play.png'} alt='' onClick={() => {props.onMusic(state.music)}} id=\"pbtn\"></img>\r\n          <img src={API_URL +'/images/icons/playlist.png'} alt='' onClick={addPlayList} id=\"plbtn\"></img>\r\n          <img src={API_URL + '/images/icons/download.png'} alt='' onClick={() => handleDownload(state.music)} id=\"dbtn\"></img>\r\n        </div>\r\n        <div id=\"lyrics\">\r\n          <h2 style={{marginTop:'50px', borderTop:\"solid 1px gray\", paddingTop:'30px'}}>가사</h2>\r\n          {showLyrics && (\r\n            <Typography variant=\"body2\" style={{ whiteSpace: 'pre-line' }}>\r\n              {state.music.lyrics}\r\n            </Typography>\r\n          )}\r\n          <Button onClick={handleToggleLyrics} style={{color : \"#fff\"}}>\r\n            {showLyrics ? '가사 숨기기' : '가사 보기'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MusicDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}