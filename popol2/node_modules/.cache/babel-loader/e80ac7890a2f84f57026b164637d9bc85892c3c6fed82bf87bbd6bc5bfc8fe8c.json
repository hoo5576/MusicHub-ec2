{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/Desktop/MusicHub-ec2/popol2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useReducer,useEffect}from\"react\";var initialState={loading:false,data:null,error:null};// 로딩중? 데이터 받기 성공? 데이터 받기 실패\n// LOADING , SUCCESS, ERROR\nfunction reducer(state,action){switch(action.type){case\"LOADING\":return{loading:true,data:null,error:null};case\"SUCCESS\":return{loading:false,data:action.data,error:null};case\"ERROR\":return{loading:false,data:null,error:action.error};default:return state;}}function useAsync(callback){var deps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];// console.log(\"useAsync진입: \", deps);\nvar _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var fetchDate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatch({type:\"LOADING\"});_context.prev=1;_context.next=4;return callback();case 4:data=_context.sent;//callback은 getProduct()\nconsole.log(\"어싱크data: \",data);dispatch({type:\"SUCCESS\",data:data});if(data==false){dispatch({type:\"ERROR\",error:\"강제에러\"});}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);dispatch({type:\"ERROR\",error:_context.t0});case 13:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function fetchDate(){return _ref.apply(this,arguments);};}();useEffect(function(){// useEffect(()=>{}, [])는 처음 1회만 실행 \nfetchDate();// eslint-disable-next-line\n},deps);//deps는 빈배열([]) 34라인\nreturn[state,fetchDate];}export default useAsync;","map":{"version":3,"names":["useReducer","useEffect","initialState","loading","data","error","reducer","state","action","type","useAsync","callback","deps","arguments","length","undefined","_useReducer","_useReducer2","_slicedToArray","dispatch","fetchDate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","sent","console","log","t0","stop","apply"],"sources":["C:/Users/user/Desktop/MusicHub-ec2/popol2/src/customHook/useAsync.js"],"sourcesContent":["import { useReducer, useEffect } from \"react\"\r\nconst initialState = {\r\n    loading: false,\r\n    data: null,\r\n    error: null\r\n}\r\n// 로딩중? 데이터 받기 성공? 데이터 받기 실패\r\n// LOADING , SUCCESS, ERROR\r\nfunction reducer(state, action){\r\n    switch(action.type) {\r\n        case \"LOADING\":\r\n            return {\r\n                loading: true,\r\n                data: null,\r\n                error: null\r\n            };\r\n        case \"SUCCESS\":\r\n            return {\r\n                loading: false,\r\n                data: action.data,\r\n                error: null\r\n            }\r\n        case \"ERROR\":\r\n            return {\r\n                loading: false,\r\n                data: null,\r\n                error: action.error\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction useAsync(callback, deps = []) {\r\n    // console.log(\"useAsync진입: \", deps);\r\n    const [state, dispatch] = useReducer(reducer, initialState);\r\n    const fetchDate = async () => {\r\n        dispatch({type: \"LOADING\"});\r\n        try {\r\n            const data = await callback(); //callback은 getProduct()\r\n            console.log(\"어싱크data: \", data);\r\n            dispatch({\r\n                type: \"SUCCESS\",\r\n                data: data\r\n            })\r\n            if(data==false){\r\n                dispatch({\r\n                    type: \"ERROR\",\r\n                    error: \"강제에러\"\r\n                })  \r\n            }\r\n        }\r\n        catch(e){\r\n            dispatch({\r\n                type: \"ERROR\",\r\n                error: e\r\n            })\r\n        }\r\n    }\r\n    useEffect(()=>{ // useEffect(()=>{}, [])는 처음 1회만 실행 \r\n        fetchDate();\r\n    // eslint-disable-next-line\r\n    }, deps); //deps는 빈배열([]) 34라인\r\n    return [state, fetchDate];\r\n}\r\nexport default useAsync"],"mappings":"6YAAA,OAASA,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC7C,GAAM,CAAAC,YAAY,CAAG,CACjBC,OAAO,CAAE,KAAK,CACdC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IACX,CAAC,CACD;AACA;AACA,QAAS,CAAAC,OAAOA,CAACC,KAAK,CAAEC,MAAM,CAAC,CAC3B,OAAOA,MAAM,CAACC,IAAI,EACd,IAAK,SAAS,CACV,MAAO,CACHN,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IACX,CAAC,CACL,IAAK,SAAS,CACV,MAAO,CACHF,OAAO,CAAE,KAAK,CACdC,IAAI,CAAEI,MAAM,CAACJ,IAAI,CACjBC,KAAK,CAAE,IACX,CAAC,CACL,IAAK,OAAO,CACR,MAAO,CACHF,OAAO,CAAE,KAAK,CACdC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAEG,MAAM,CAACH,KAClB,CAAC,CACL,QACI,MAAO,CAAAE,KAAK,CACpB,CACJ,CAEA,QAAS,CAAAG,QAAQA,CAACC,QAAQ,CAAa,IAAX,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,CACjC;AACA,IAAAG,WAAA,CAA0BhB,UAAU,CAACM,OAAO,CAAEJ,YAAY,CAAC,CAAAe,YAAA,CAAAC,cAAA,CAAAF,WAAA,IAApDT,KAAK,CAAAU,YAAA,IAAEE,QAAQ,CAAAF,YAAA,IACtB,GAAM,CAAAG,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAArB,IAAA,QAAAmB,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACdX,QAAQ,CAAC,CAACV,IAAI,CAAE,SAAS,CAAC,CAAC,CAACmB,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEL,CAAAnB,QAAQ,CAAC,CAAC,QAAvBP,IAAI,CAAAwB,QAAA,CAAAG,IAAA,CAAqB;AAC/BC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAE7B,IAAI,CAAC,CAC9Be,QAAQ,CAAC,CACLV,IAAI,CAAE,SAAS,CACfL,IAAI,CAAEA,IACV,CAAC,CAAC,CACF,GAAGA,IAAI,EAAE,KAAK,CAAC,CACXe,QAAQ,CAAC,CACLV,IAAI,CAAE,OAAO,CACbJ,KAAK,CAAE,MACX,CAAC,CAAC,CACN,CAACuB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,aAGDT,QAAQ,CAAC,CACLV,IAAI,CAAE,OAAO,CACbJ,KAAK,CAAAuB,QAAA,CAAAM,EACT,CAAC,CAAC,0BAAAN,QAAA,CAAAO,IAAA,MAAAV,OAAA,iBAET,kBAtBK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAe,KAAA,MAAAvB,SAAA,OAsBd,CACDZ,SAAS,CAAC,UAAI,CAAE;AACZmB,SAAS,CAAC,CAAC,CACf;AACA,CAAC,CAAER,IAAI,CAAC,CAAE;AACV,MAAO,CAACL,KAAK,CAAEa,SAAS,CAAC,CAC7B,CACA,cAAe,CAAAV,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}